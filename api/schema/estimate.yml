createEstimation:
  additionalProperties: false
  description: Estimation creation.
  title: Estimation
  type: object
  properties:
    patient:
      $ref: "./patient.yml#/patient"
      description: Update patient
    patientId:
      description: ID of patient.
      title: Patient ID
      type: string
    treatments:
      description: Treatments.
      title: Treatment
      type: array
      items: { $ref: "#/createEstimationTreatment" }
  required: [treatments]
createEstimationTreatment:
  additionalProperties: false
  description: Create estimation treatment.
  type: object
  properties:
    insurancePolicyIds:
      description: IDs of insurance policies.
      items: { type: string }
      title: Insurance policy IDs
      type: array
    insurancePolicies:
      description: Insurance policies.
      items: { $ref: "./insurance.yml#/insurancePolicy" }
      title: Insurance policies
      type: array
    procedures:
      description: Estimation procedures.
      items: { $ref: "#/estimationProcedure" }
      title: Procedures
      type: array
    serviceDate:
      description: Date of service
      format: date
      title: Service date
      type: string
    serviceLocationId:
      description: ID of service location.
      title: Service location ID
      type: string
  required: [procedures, serviceDate, serviceLocationId]
  title: Estimation treatment
estimate:
  additionalProperties: false
  description: Estimation result.
  properties:
    treatments:
      items: { $ref: "#/estimateTreatment" }
      type: array
    total: { $ref: "#/estimateAmounts" }
  title: Estimate
  type: object
estimateTreatment:
  additionalProperties: false
  properties:
    amounts: { $ref: "#/estimateAmounts" }
    payers:
      items:
        type: object
        properties:
          type:
            insurancePolicyId:
              type: string
            amounts: { $ref: "#/estimateAmounts" }
      type: array
    procedures:
      items: { $ref: "#/estimateProcedure" }
      type: array
  required: [patient, payers]
  type: object
estimateProcedure:
  description: Estimate procedure details.
  properties:
    allowed:
      description: Allowed amount.
  title: Estimate procedure
  type: object
estimateAmounts:
  additionalProperties: false
  properties:
    patient:
      additionalProperties: false
      properties:
        amount:
          description: Amount paid by the patient
          title: Amount
          type: string
      type: object
    insurance:
      items:
        additionalProperties: false
        properties:
          deductibles:
            description: Deductibles.
            items: { $ref: "#/estimateDeductible" }
            title: Deductibles
            type: array
          outOfPocketMaxes:
            description: Out of pocket maximums.
            items: { $ref: "#/estimateOutOfPocketMax" }
            title: Out of pocket maximums
            type: array
          copays:
            description: Copays.
            items: { $ref: "#/estimateCopay" }
            title: Copays
            type: array
          insurancePolicyId:
            type: string
          patientPayment:
            description: Patient payment.
            properties:
              coinsurance:
                description: Patient payment of coinsurance.
                title: Coinsurance
                type: string
              copay:
                description: Patient payment of copay.
                title: Copay
                type: string
              deductible:
                description: Patient payment of deductible.
                title: Deductible
                type: string
            title: Patient
          notCovered:
            description: Amount not covered by the payer.
            title: Not covered
            type: string
          payment:
            description: Payer payment.
            title: Payment
            type: string
      type: array
estimateCoinsurance:
  additionalProperties: false
  description: Estimate coinsurance details.
  properties:
    benefit: { $ref: "./benefit.yml#/coinsurance" }
  title: Estimation coinsurance
estimateCopay:
  additionalProperties: false
  description: Estimate copay details.
  properties:
    benefit: { $ref: "./benefit.yml#/copay" }
  title: Estimate copay
estimateDeductible:
  additionalProperties: false
  properties:
    benefit: { $ref: "./benefit.yml#/deductible" }
    remaining:
      description: Estimated final remaining.
      type: string
  required: [benefit, remaining]
  type: object
estimateOutOfPocketMax:
  additionalProperties: false
  properties:
    benefit: { $ref: "./benefit.yml#/outOfPocketMax" }
    remaining:
      description: Estimated final remaining.
      type: string
  required: [benefit, remaining]
  type: object
estimation:
  description: Estimation.
  title: Estimation
  type: object
  properties:
    patientId:
      description: ID of patient.
      title: Patient ID
      type: string
    treatments:
      description: Treatments.
      title: Treatment
      type: array
      items: { $ref: "#/estimationTreatment" }
  required: [patientId, treatments]
estimationInsurance:
  properties:
    benefits:
      default:
        coinsurance: null
        copay: null
        deductible: null
        outOfPocketMax: null
      coinsurance:
        $ref: "./benefit.yml#/coinsurance"
        default: null
        nullable: true
      copay:
        $ref: "./benefit.yml#/copay"
        default: null
        nullable: true
      deductible:
        $ref: "./benefit.yml#/deductible"
        default: null
        nullable: true
      outOfPocketMax:
        $ref: "./benefit.yml#/outOfPocketMax"
        default: null
        nullable: true
    eligibility:
      default: null
      $ref: "./eligibility.yml#/eligibility"
      nullable: true
    policy:
      $ref: "./insurance.yml#/insurancePolicy"
      title: Policy
  required: [policy]
  title: Estimation insurance
  type: object
estimationProcedure:
  description: Estimation procedure.
  properties:
    code:
      description: CPT/HCPC code of procedure
      title: Code
      type: string
    modifiers:
      description: Modifier codes
      default: []
      title: Modifiers
      type: array
      items: { type: string }
    quantity:
      description: Number of units
      format: int32
      title: Quantity
      type: integer
  required: [code, quantity]
  title: Estimation procedure
  type: object
estimationTreatment:
  additionalProperties: false
  description: Estimation treatment.
  type: object
  properties:
    insurancePolicies:
      type: array
      items: { $ref: "#/estimationInsurance" }
    procedures:
      type: array
      items: { $ref: "#/estimationProcedure" }
    serviceDate:
      description: Date of service
      type: string
      format: date
    serviceLocationId:
      description: ID of service location
      title: Service location ID
      type: string
  required: [insurancePolicies, procedures, serviceDate, serviceLocationId]
title: Estimation treatment
